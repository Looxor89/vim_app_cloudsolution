<mvc:View displayBlock="true" controllerName="vim_ui.controller.DetailDetail" height="100%" xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.ui.table" xmlns:f="sap.f" xmlns:l="sap.ui.layout" xmlns:u="sap.ui.unified" xmlns:m="sap.m" xmlns:form="sap.ui.layout.form" xmlns:core="sap.ui.core" xmlns:c="sap.suite.ui.commons" class="sapUiSizeCompact">

    <f:DynamicPage id="DDPage" toggleHeaderOnTitleClick="true" showFooter="true" stickySubheaderProvider="iconTabBar" headerExpanded="false" preserveHeaderStateOnScroll="true" class="sapUiNoContentPadding">
        <f:title>
            <f:DynamicPageTitle>

                <f:heading>
                    <m:FlexBox wrap="Wrap" fitContainer="true" alignItems="Center">
                        <m:Title text="{i18n>DocumentExtraction}â€‹" wrapping="true" class="sapUiTinyMarginEnd" />
                    </m:FlexBox>
                </f:heading>
                <f:expandedContent>
                    <m:Label text="{i18n>DocumentExtraction}: {detailDetailModel>/lock/LOCKEDBY}" visible="{path: 'detailDetailModel>/lock/LOCKEDBY', formatter: '.formatter.formatLock'}" />
                </f:expandedContent>
                <f:snappedContent>
                    <m:Label text="{i18n>DocumentExtraction}: {detailDetailModel>/lock/LOCKEDBY}" visible="{path: 'detailDetailModel>/lock/LOCKEDBY', formatter: '.formatter.formatLock'}" />
                </f:snappedContent>

                <f:navigationActions>
                    <m:Button type="Emphasized" text="{i18n>EditDocumentButton}" icon="sap-icon://edit" press="handleGEdit" visible="{ parts:['detailDetailModel>/props/gEditMode', 'detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/admin'], formatter: '.formatter.detailDetailEdit' }" enabled="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/save'], formatter: '.formatter.allowActions' }" />
                    <m:Button type="Emphasized" text="{i18n>CancelEditButton}" icon="sap-icon://edit-outside" press="handleCancelGEdit" visible="{ parts:['detailDetailModel>/props/gEditMode', 'detailDetailModel>/detail/header/DOC_STATUS' , 'props>/action/admin'] , formatter: '.formatter.detailDetailEditCancel' }" />
                    <m:Button text="{i18n>AssignButton}" icon="sap-icon://activity-individual" press="onForwardPressHandler" 
                        visible="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/assign'], formatter: '.formatter.allowActions' }"
                        >
                        <m:layoutData>
                            <m:OverflowToolbarLayoutData priority="AlwaysOverflow" closeOverflowOnInteraction="false" />
                        </m:layoutData>
                    </m:Button>
                    <m:Button text="{i18n>ForwardButton}" icon="sap-icon://forward" press="onForwardPressHandler" 
                        visible="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/forward'], formatter: '.formatter.allowActions' }"
                        >
                        <m:layoutData>
                            <m:OverflowToolbarLayoutData priority="High" closeOverflowOnInteraction="false" />
                        </m:layoutData>
                    </m:Button>
                    <m:Button text="{i18n>RejectButton}" icon="sap-icon://employee-rejections" press="onRejectPress" 
                        type="Reject"
                        visible="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/reject'], formatter: '.formatter.allowActions' }"
                        >
                        <m:layoutData>
                            <m:OverflowToolbarLayoutData priority="High" closeOverflowOnInteraction="false" />
                        </m:layoutData>
                    </m:Button>
                    <m:Button icon="sap-icon://decline" press="onCancelPress" tooltip="Close" type="Transparent">
                        <m:layoutData>
                            <m:OverflowToolbarLayoutData priority="High" closeOverflowOnInteraction="false" />
                        </m:layoutData>
                    </m:Button>
                    <m:OverflowToolbarButton type="Transparent" icon="sap-icon://decline" press="onCancelPress" tooltip="Close column" visible="{= ${/actionButtonsInfo/endColumn/closeColumn} !== null }" />
                    <m:OverflowToolbarButton id="messagePopoverBtn" visible="true" icon="sap-icon://message-popup" type="Emphasized" text="{=${msg>/aMsg}.length}" press=".handleMessagePopoverPress" ariaHasPopup="Dialog" />

                </f:navigationActions>

            </f:DynamicPageTitle>
        </f:title>

        <f:header>
            <f:DynamicPageHeader pinnable="false">
                <l:Grid>
                    <m:ObjectAttribute title="Document Status" text="{path: 'detailDetailModel>/detail/header/DOC_STATUS', formatter: '.formatter.statusText'}" />
                    <m:ObjectAttribute title="Type/Category" text="{detailDetailModel>/detail/header/DOCCATEGORY}" />
                    <m:ObjectAttribute title="Assigned To" text="{detailDetailModel>/detail/header/ASSIGNEDTO}" />
                    <m:ObjectAttribute title="Changed By" text="{detailDetailModel>/detail/header/LASTCHANGEDBY}" />
                    <m:ObjectStatus title="Changed At" text="{path:'detailDetailModel>/detail/header/LASTCHANGEDON', formatter:'.formatter.formatDateString'}" />
                </l:Grid>
            </f:DynamicPageHeader>
        </f:header>

        <f:content>
            <m:IconTabBar id="iconTabBar" applyContentPadding="false" class="sapUiNoContentPadding" expandable="false">
                <m:items>

                    <m:IconTabFilter text="{i18n>MainDocument}">
                        <l:VerticalLayout class="sapUiNoContentPadding" width="100%" enabled="{detailDetailModel>/props/gEditMode}">
                            <l:BlockLayout id="BlockLayout" background="Light">
                                <l:BlockLayoutRow>
                                    <l:BlockLayoutCell>

                                        <m:Label text="{i18n>Transaction}" required="true" />
                                        <m:Select id="idTransaction" change=".onChangeTransaction">
                                            <core:Item key="keyTransaction1" text="{i18n>Invoice}" />
                                            <core:Item key="keyTransaction2" text="{i18n>CreditMemo}" />
                                            <core:Item key="keyTransaction3" text="{i18n>SubsequentDebit}" />
                                            <core:Item key="keyTransaction4" text="{i18n>SubsequentCredit}" />
                                        </m:Select>

                                        <form:SimpleForm id="invoiceHeaderSimpleForm" editable="true" layout="ResponsiveGridLayout" columnsM="2" columnsL="2" columnsXL="3">
                                            <form:content>

                                                <core:Title text="{i18n>BasicData}" />

                                                <m:Label text="{i18n>CompanyCode}" required="true" />
                                                <m:Input id="idCompanyCode" value="{detailDetailModel>/currentInvoice/CompanyCode}" change=".onChangeCompanyCode" maxLength="4"/>
                                                
                                                <m:Label text="{i18n>Invoicedate}" required="true" />
                                                <m:DatePicker id="idInvDate" value="{
                                                    'path': 'detailDetailModel>/currentInvoice/DocumentDate'
                                                }" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" change=".onChangeDocumentDate" placeholder="YYYY-MM-DD"  />

                                                <m:Label text="{i18n>InvoiceReceiptDate}" required="true" />
                                                <m:DatePicker id="idDocDate" value="{
                                                    'path':'detailDetailModel>/currentInvoice/InvoiceReceiptDate'
                                                }" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" change=".onChangeInvoiceReceiptDate" placeholder="YYYY-MM-DD" />

                                                <m:Label text="{i18n>PostgingDate}"  />
                                                <m:DatePicker id="idDueDate" value="{
                                                    'path':'detailDetailModel>/currentInvoice/PostingDate'
                                                }" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" change=".onChangePostingDate" placeholder="YYYY-MM-DD" />

                                                <m:Label text="{i18n>InvoicingPartyVendorCode}" required="true" />
                                                <m:Input id="idInvoicingPartyVendorCode" value="{detailDetailModel>/currentInvoice/InvoicingParty}" change=".onChangeInvoicingParty" maxLength="10"/>
                                                
                                                <m:Label text="{i18n>Currency}" required="true" />
                                                <m:Input id="idCurrency" change=".onChangeCurrency" value="{detailDetailModel>/currentInvoice/Currency}" 
                                                    showValueHelp="true" valueHelpRequest=".onVHCurrency" 
                                                    maxLength="5"/>

                                                <m:Label text="{i18n>SupplierInvoiceIDByInvcgParty}" required="true" />
                                                <m:Input id="idSupplierInvoiceIDByInvcgParty" value="{detailDetailModel>/currentInvoice/SupplierInvoiceIDByInvcgParty}" change=".onChangeSupplierInvoiceIDByInvcgParty" maxLength="16"/>
                                                
                                                <m:Label text="{i18n>GrossAmount}" required="true" />
                                                <m:Input id="idGrossAmt" 
                                                    value="{
                                                        'path': 'detailDetailModel>/currentInvoice/InvoiceGrossAmount',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 14,
                                                                        scale: 3
                                                                    }
                                                    }" change=".onChangeInvoiceGrossAmount"
                                                    type="Number" description="{appmodel>/detailDetail/header/currencyCode/value}" 
                                                    placeholder="0.00"/>

                                                <m:Label text="{i18n>SupplierPostingLineItemText}" required="true" />
                                                <m:Input id="idSupplierPostingLineItemText" value="{detailDetailModel>/currentInvoice/SupplierPostingLineItemText}" change=".onChangeSupplierPostingLineItemText" maxLength="50"/>

                                                <m:Label text="{i18n>TaxIsCalculatedAutomatically}" required="true" />
                                                <m:CheckBox id="idTaxIsCalculatedAutomatically" selected="{detailDetailModel>/currentInvoice/TaxIsCalculatedAutomatically}" select=".onChangeTaxIsCalculatedAutomatically"/>
                                                
                                                <core:Title text="{i18n>Payment}" />

                                                <m:Label text="{i18n>BaselineDate}" required="true" />
                                                <m:DatePicker id="idDueCalculationBaseDate" value="{
                                                    'path':'detailDetailModel>/currentInvoice/DueCalculationBaseDate'
                                                }" change=".onChangeDueCalculationBaseDate" placeholder="YYYY-MM-DD" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" />

                                                <m:Label text="{i18n>ManualCashDiscount}" required="true" />
                                                <m:Input id="idManualCashDiscount" value="{
                                                    'path': 'detailDetailModel>/currentInvoice/ManualCashDiscount',
                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                    formatOptions: {
                                                        minFractionDigits: 0,
                                                        maxFractionDigits: 3,
                                                        groupingEnabled: false
                                                    },
                                                    constraints: {
                                                        precision: 14,
                                                        scale: 3
                                                    }
                                                }" change=".onChangeManualCashDiscount"/>

                                                <m:Label text="{i18n>PaymentTerms}" />
                                                <m:Input id="idPaymentTerms" showValueHelp="true" valueHelpRequest=".onPayTermsVH" value="{detailDetailModel>/currentInvoice/PaymentTerms}" change=".onChangePaymentTerms" maxLength="4"/>
                                                
                                                <m:Label text="{i18n>CashDiscount1Days}" />
                                                <m:Input id="idCashDiscount1Days" value="{
                                                    'path': 'detailDetailModel>/currentInvoice/CashDiscount1Days',
                                                    type: 'sap.ui.model.type.Integer',
                                                    constraints: {
                                                        precision: 3
                                                    }
                                                }" change=".onChangeCashDiscount1Days"/>
                                                
                                                <m:Label text="{i18n>CashDiscount1Percent}" />
                                                <m:Input id="idCashDiscount1Percent" value="{
                                                    'path': 'detailDetailModel>/currentInvoice/CashDiscount1Percent',
                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                    formatOptions: {
                                                        minFractionDigits: 0,
                                                        maxFractionDigits: 3,
                                                        groupingEnabled: false
                                                    },
                                                    constraints: {
                                                        precision: 5,
                                                        scale: 3
                                                    }
                                                }" change=".onChangeCashDiscount1Percent"/>
                                                
                                                <m:Label text="{i18n>CashDiscount2Days}" />
                                                <m:Input id="idCashDiscount2Days" value="{
                                                    'path': 'detailDetailModel>/currentInvoice/CashDiscount2Days',
                                                    type: 'sap.ui.model.type.Integer',
                                                    constraints: {
                                                        precision: 3
                                                    }
                                                }" change=".onChangeCashDiscount2Days"/>
                                                
                                                <m:Label text="{i18n>CashDiscount2Percent}" />
                                                <m:Input id="idCashDiscount2Percent" value="{
                                                    'path': 'detailDetailModel>/currentInvoice/CashDiscount2Percent',
                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                    formatOptions: {
                                                        minFractionDigits: 0,
                                                        maxFractionDigits: 3,
                                                        groupingEnabled: false
                                                    },
                                                    constraints: {
                                                        precision: 5,
                                                        scale: 3
                                                    }
                                                }" change=".onChangeCashDiscount2Percent"/>
                                                
                                                <m:Label text="{i18n>FixedCashDiscount}" />
                                                <m:Input id="idFixedCashDiscount" value="{detailDetailModel>/currentInvoice/FixedCashDiscount}" change=".onChangeFixedCashDiscount" maxLength="1"/>

                                                <m:Label text="{i18n>NetPaymentDays}" />
                                                <m:Input id="idNetPaymentDays" value="{
                                                    'path': 'detailDetailModel>/currentInvoice/NetPaymentDays',
                                                    type: 'sap.ui.model.type.Integer',
                                                    constraints: {
                                                        precision: 3
                                                    }
                                                }" change=".onChangeNetPaymentDays"/>
                                                
                                                <m:Label text="{i18n>BPBankAccountInternalID}" />
                                                <m:Input id="idBPBankAccountInternalID" value="{detailDetailModel>/currentInvoice/BPBankAccountInternalID}" change=".onChangeBPBankAccountInternalID" maxLength="4"/>
                                                
                                                <m:Label text="{i18n>PaymentMethod}" />
                                                <m:Input id="idPaymentMethod" value="{detailDetailModel>/currentInvoice/PaymentMethod}" change=".onChangePaymentMethod" maxLength="1"/>

                                                <m:Label text="{i18n>Reference}" required="true" />
                                                <m:Input id="idReference" value="{detailDetailModel>/currentInvoice/InvoiceReference}" change=".onChangeReference" maxLength="10"/>

                                                <m:Label text="{i18n>InvoiceReferenceFiscalYear}" required="true" />
                                                <m:Input id="idInvoiceReferenceFiscalYear" value="{detailDetailModel>/currentInvoice/InvoiceReferenceFiscalYear}" change=".onChangeInvoiceReferenceFiscalYear" maxLength="4"/>

                                                <m:Label text="{i18n>HouseBank}" required="true" />
                                                <m:Input id="idHouseBank" value="{detailDetailModel>/currentInvoice/HouseBank}" change=".onChangeHouseBank" maxLength="5"/>

                                                <m:Label text="{i18n>HouseBankAccount}" required="true" />
                                                <m:Input id="idHouseBankAccount" value="{detailDetailModel>/currentInvoice/HouseBankAccount}" change=".onChangeHouseBankAccount" maxLength="5"/>

                                                <m:Label text="{i18n>PaymentBlockingReason}" required="true" />
                                                <m:Input id="idPaymentBlockingReason" value="{detailDetailModel>/currentInvoice/PaymentBlockingReason}" change=".onChangePaymentBlockingReason" maxLength="1"/>

                                                <m:Label text="{i18n>PaymentReason}" required="true" />
                                                <m:Input id="idPaymentReason" value="{detailDetailModel>/currentInvoice/PaymentReason}" change=".onChangePaymentReason" maxLength="4"/>


                                                <core:Title text="{i18n>Details}" />

                                                <m:Label text="{i18n>UnplannedDeliveryCost}" required="true" />
                                                <m:Input id="idUnplannedDeliveryCost" value="{
                                                    'path': 'detailDetailModel>/currentInvoice/UnplannedDeliveryCost',
                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                    formatOptions: {
                                                        minFractionDigits: 0,
                                                        maxFractionDigits: 3,
                                                        groupingEnabled: false
                                                    },
                                                    constraints: {
                                                        precision: 14,
                                                        scale: 3
                                                    }
                                                }" change=".onChangeUnplannedDeliveryCost"/>

                                                <m:Label text="{i18n>Text}" />
                                                <m:Input id="idFreeTxt" value="{detailDetailModel>/currentInvoice/DocumentHeaderText}" maxLength="25" change=".onChangeFreeTxt"/>

                                                <m:Label text="{i18n>InvoiceDocumentType}" />
                                                <m:Input id="idInvDocType" showValueHelp="true" valueHelpRequest=".onInvDocTypeVH" value="{detailDetailModel>/currentInvoice/AccountingDocumentType}" change=".onChangeInvDocType" maxLength="2"/>

                                                <m:Label text="{i18n>SupplyingCountry}" required="true" />
                                                <m:Input id="idSupplyingCountry" value="{detailDetailModel>/currentInvoice/SupplyingCountry}" change=".onChangeSupplyingCountry" maxLength="3"/>

                                                <m:Label text="{i18n>Assignment}" required="true" />
                                                <m:Input id="idAssignment" value="{detailDetailModel>/currentInvoice/AssignmentReference}" maxLength="18" change=".onChangeAssignment"/>

                                                <m:Label text="{i18n>IsEUTriangularDeal}" required="true" />
                                                <m:CheckBox id="idIsEUTriangularDeal" selected="{detailDetailModel>/currentInvoice/IsEUTriangularDeal}" select=".onChangeIsEUTriangularDeal"/>

                                                
                                                <core:Title text="{i18n>Tax}" />

                                                <m:Label text="{i18n>TaxDeterminationDate}" />
                                                <m:DatePicker id="idTaxDeterminationDate" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" placeholder="YYYY-MM-DD" change="onChangeTaxDeterminationDate" value="{
                                                    'path':'detailDetailModel>/currentInvoice/TaxDeterminationDate'}"/>

                                                <m:Label text="{i18n>TaxReportingDate}"/>
                                                <m:DatePicker id="idTaxReportingDate" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" placeholder="YYYY-MM-DD" change="onChangeTaxReportingDate" value="{
                                                    'path':'detailDetailModel>/currentInvoice/TaxReportingDate'}"/>

                                                <m:Label text="{i18n>TaxFulfillmentDate}"/>
                                                <m:DatePicker id="idTaxFulfillmentDate" displayFormat="yyyy-MM-dd" valueFormat="yyyy-MM-dd" placeholder="YYYY-MM-DD" change="onChangeTaxFulfillmentDate" value="{
                                                    'path':'detailDetailModel>/currentInvoice/TaxFulfillmentDate'}"/>

                                                
                                                <core:Title text="{i18n>WithholdingTax}" />

                                                <Table id="idSupplierInvoiceWhldgTaxTable" rows="{
                                                        path: 'detailDetailModel>/currentInvoice/To_SupplierInvoiceWhldgTax'
                                                    }" class="sapUiNoMargin"
                                                        visibleRowCount="5"
                                                        rowSelectionChange="onSelectionSupplierInvoiceWhldgTaxChange"
                                                        selectionMode="None">
                                                    <extension>
                                                        <m:Toolbar>
                                                            <m:ToolbarSpacer />
                                                            <m:Button text="{i18n>AddButton}" press="onAddSupplierInvoiceWhldgTaxRow" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            <m:Button id="deleteSupplierInvoiceWhldgTaxTable" text="{i18n>DeleteButton}" press="onDeleteSelectedSupplierInvoiceWhldgTaxRows" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                        </m:Toolbar>
                                                    </extension>
                                                    <columns>
                                                        <Column >
                                                            <m:Label text="{i18n>WithholdingTaxType}" required="true" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>WithholdingTaxType}" change=".onChangeWithholdingTaxType" maxLength="2"/>
                                                            </template>
                                                        </Column>
                                                        <Column >
                                                            <m:Label text="{i18n>WithholdingTaxCode}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>WithholdingTaxCode}" change=".onChangeWithholdingTaxCode" maxLength="2"/>
                                                            </template>
                                                        </Column>
                                                        <Column >
                                                            <m:Label text="{i18n>WithholdingTaxBaseAmount}" required="true" />
                                                            <template>
                                                                <m:Input value="{
                                                                    'path': 'detailDetailModel>WithholdingTaxBaseAmount',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 16,
                                                                        scale: 3
                                                                    }
                                                                }" change=".onChangeWithholdingTaxBaseAmount"/>
                                                            </template>
                                                        </Column>
                                                     </columns>
                                                </Table>

                                            </form:content>
                                        </form:SimpleForm>
                                    </l:BlockLayoutCell>
                                </l:BlockLayoutRow>

                                <l:BlockLayoutRow>
                                    <l:BlockLayoutCell>
                                     <m:IconTabBar id="iconTabBarBodyInvoice" applyContentPadding="false" class="sapUiNoContentPadding" expandable="false">
                                        <m:items>
                                            <m:IconTabFilter text="{i18n>PurchaseOrder}" count="{= ${detailDetailModel>/currentInvoice/PORecords/length}}">

                                                <m:Label text="{i18n>RefDocCategory}" required="true" class="sapUiSmallMargin"/>
                                                <m:Select id="idRefDocCategory" change=".onChangeRefDocCategory" class="sapUiSmallMargin" enabled="{detailDetailModel>/props/lineItemTable/editMode}">
                                                    <core:Item key="keyRefDocCategory0" />
                                                    <core:Item key="keyRefDocCategory1" text="{i18n>PurchaseOrder}" />
                                                    <core:Item key="keyRefDocCategory2" text="{i18n>DeliveryNote}" />
                                                    <core:Item key="keyRefDocCategoryS" text="{i18n>ServiceEntrySheet}" />
                                                </m:Select>
                                                
                                                <!-- <m:HBox> 
                                                    <m:Label text="{i18n>RefDocCategory}" required="true" class="sapUiSmallMargin"/>
                                                    <m:Select id="idRefDocCategory" change=".onChangeRefDocCategory" class="sapUiSmallMargin" enabled="{detailDetailModel>/props/lineItemTable/editMode}">
                                                        <core:Item key="keyRefDocCategory0" />
                                                        <core:Item key="keyRefDocCategory1" text="{i18n>PurchaseOrder}" />
                                                        <core:Item key="keyRefDocCategory2" text="{i18n>DeliveryNote}" />
                                                        <core:Item key="keyRefDocCategoryS" text="{i18n>ServiceEntrySheet}" />
                                                    </m:Select>

                                                    <m:Label text="{i18n>To_SelectedPurchaseOrders_PurchaseOrder}" required="false" class="sapUiSmallMargin" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedPurchaseOrders_PurchaseOrder'}"/>
                                                    <m:Input id="idTo_SelectedPurchaseOrders_PurchaseOrder" class="sapUiSmallMargin" value="{parts: ['detailDetailModel>/currentInvoice/RefDocumentCategory', 'detailDetailModel>/currentInvoice/To_SelectedPurchaseOrders'], formatter:'.formatter.fillTo_SelectedPurchaseOrders_PurchaseOrder'}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedPurchaseOrders_PurchaseOrder" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedPurchaseOrders_PurchaseOrder'}" maxLength="10"/>

                                                    <m:Label text="{i18n>To_SelectedPurchaseOrders_PurchaseOrderItem}" required="false" class="sapUiSmallMargin" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedPurchaseOrders_PurchaseOrder'}"/>
                                                    <m:Input id="idTo_SelectedPurchaseOrders_PurchaseOrderItem" class="sapUiSmallMargin" value="{parts: ['detailDetailModel>/currentInvoice/RefDocumentCategory', 'detailDetailModel>/currentInvoice/To_SelectedPurchaseOrders'], formatter:'.formatter.fillTo_SelectedPurchaseOrders_PurchaseOrderItem'}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedPurchaseOrders_PurchaseOrderItem" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedPurchaseOrders_PurchaseOrder'}" maxLength="5"/>

                                                    <m:Label text="{i18n>To_SelectedDeliveryNotes_InboundDeliveryNote}" required="false" class="sapUiSmallMargin" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedDeliveryNotes_InboundDeliveryNote'}"/>
                                                    <m:Input id="idTo_SelectedDeliveryNotes_InboundDeliveryNote" class="sapUiSmallMargin" value="{parts: ['detailDetailModel>/currentInvoice/RefDocumentCategory', 'detailDetailModel>/currentInvoice/To_SelectedDeliveryNotes'], formatter:'.formatter.fillTo_SelectedDeliveryNotes_InboundDeliveryNote'}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedDeliveryNotes_InboundDeliveryNote" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedDeliveryNotes_InboundDeliveryNote'}" maxLength="16"/>

                                                    <m:Label text="{i18n>To_SelectedServiceEntrySheets_ServiceEntrySheet}" required="false" class="sapUiSmallMargin" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedServiceEntrySheets_ServiceEntrySheet'}"/>
                                                    <m:Input id="idTo_SelectedServiceEntrySheets_ServiceEntrySheet" class="sapUiSmallMargin" value="{parts: ['detailDetailModel>/currentInvoice/RefDocumentCategory', 'detailDetailModel>/currentInvoice/To_SelectedServiceEntrySheets'], formatter:'.formatter.fillTo_SelectedServiceEntrySheets_ServiceEntrySheet'}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedServiceEntrySheets_ServiceEntrySheet" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedServiceEntrySheets_ServiceEntrySheet'}" maxLength="10"/>

                                                    <m:Label text="{i18n>To_SelectedServiceEntrySheets_ServiceEntrySheetItem}" required="false" class="sapUiSmallMargin" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedServiceEntrySheets_ServiceEntrySheet'}"/>
                                                    <m:Input id="idTo_SelectedServiceEntrySheets_ServiceEntrySheetItem" class="sapUiSmallMargin" value="{parts: ['detailDetailModel>/currentInvoice/RefDocumentCategory', 'detailDetailModel>/currentInvoice/To_SelectedServiceEntrySheets'], formatter:'.formatter.fillTo_SelectedServiceEntrySheets_ServiceEntrySheetItem'}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedServiceEntrySheets_ServiceEntrySheetItem" visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedServiceEntrySheets_ServiceEntrySheet'}" maxLength="5"/>
                                                </m:HBox> -->

                                                <Table id="idTo_SelectedPurchaseOrdersTable" rows="{
                                                        path: 'detailDetailModel>/currentInvoice/To_SelectedPurchaseOrders'
                                                    }" class="sapUiSmallMargin"
                                                        rowSelectionChange="onSelectionTo_SelectedPurchaseOrdersChange"
                                                        selectionMode="None"
                                                        visibleRowCount="5"
                                                        visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedPurchaseOrders_PurchaseOrder'}">
                                                    <extension>
                                                        <m:Toolbar>
                                                            <m:Title text="{parts: [{path: 'i18n>To_SelectedPurchaseOrders_PurchaseOrder'}, {path: 'detailDetailModel>/currentInvoice/To_SelectedPurchaseOrders/length'}], 
                                                                formatter: '.formatter.getI18nTextWithCount'}" level="H2" />
                                                            <m:ToolbarSpacer />
                                                            <m:Button text="{i18n>AddButton}" press="onAddTo_SelectedPurchaseOrdersRow" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            <m:Button id="deleteTo_SelectedPurchaseOrdersTable" text="{i18n>DeleteButton}" press="onDeleteTo_SelectedPurchaseOrdersRows" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                        </m:Toolbar>
                                                    </extension>
                                                    
                                                    <Column >
                                                        <m:Label text="{i18n>To_SelectedPurchaseOrders_PurchaseOrder}" required="true"/>
                                                        <template>
                                                            <m:Input value="{detailDetailModel>PurchaseOrder}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedPurchaseOrders_PurchaseOrder" maxLength="10"/>
                                                        </template>
                                                    </Column>
                                                    
                                                    <Column >
                                                        <m:Label text="{i18n>To_SelectedPurchaseOrders_PurchaseOrderItem}" required="true"/>
                                                        <template>
                                                            <m:Input value="{detailDetailModel>PurchaseOrderItem}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedPurchaseOrders_PurchaseOrderItem" maxLength="5"/>
                                                        </template>
                                                    </Column>
                                                </Table>

                                                <Table id="idTo_SelectedDeliveryNotesTable" rows="{
                                                        path: 'detailDetailModel>/currentInvoice/To_SelectedDeliveryNotes'
                                                    }" class="sapUiSmallMargin"
                                                        rowSelectionChange="onSelectionTo_SelectedDeliveryNotesChange"
                                                        selectionMode="None"
                                                        visibleRowCount="5"
                                                        visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedDeliveryNotes_InboundDeliveryNote'}">
                                                    <extension>
                                                        <m:Toolbar>
                                                            <m:Title text="{parts: [{path: 'i18n>To_SelectedDeliveryNotes_InboundDeliveryNote'}, {path: 'detailDetailModel>/currentInvoice/To_SelectedDeliveryNotes/length'}], 
                                                                formatter: '.formatter.getI18nTextWithCount'}" level="H2" />
                                                            <m:ToolbarSpacer />
                                                            <m:Button text="{i18n>AddButton}" press="onAddTo_SelectedDeliveryNotesRow" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            <m:Button id="deleteTo_SelectedDeliveryNotesTable" text="{i18n>DeleteButton}" press="onDeleteTo_SelectedDeliveryNotesRows" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                        </m:Toolbar>
                                                    </extension>
                                                    
                                                    <Column >
                                                        <m:Label text="{i18n>To_SelectedDeliveryNotes_InboundDeliveryNote}" required="true"/>
                                                        <template>
                                                            <m:Input value="{detailDetailModel>InboundDeliveryNote}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedDeliveryNotes_InboundDeliveryNote" maxLength="16"/>
                                                        </template>
                                                    </Column>
                                                </Table>

                                                <Table id="idTo_SelectedServiceEntrySheetsTable" rows="{
                                                        path: 'detailDetailModel>/currentInvoice/To_SelectedServiceEntrySheets'
                                                    }" class="sapUiSmallMargin"
                                                        rowSelectionChange="onSelectionTo_SelectedServiceEntrySheetsChange"
                                                        selectionMode="None"
                                                        visibleRowCount="5"
                                                        visible="{path:'detailDetailModel>/currentInvoice/RefDocumentCategory', formatter:'.formatter.showTo_SelectedServiceEntrySheets_ServiceEntrySheet'}">
                                                    <extension>
                                                        <m:Toolbar>
                                                            <m:Title text="{parts: [{path: 'i18n>To_SelectedServiceEntrySheets_ServiceEntrySheet'}, {path: 'detailDetailModel>/currentInvoice/To_SelectedServiceEntrySheets/length'}], 
                                                                formatter: '.formatter.getI18nTextWithCount'}" level="H2" />
                                                            <m:ToolbarSpacer />
                                                            <m:Button text="{i18n>AddButton}" press="onAddTo_SelectedServiceEntrySheetsRow" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            <m:Button id="deleteTo_SelectedServiceEntrySheetsTable" text="{i18n>DeleteButton}" press="onDeleteTo_SelectedServiceEntrySheetsRows" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                        </m:Toolbar>
                                                    </extension>
                                                    
                                                    <Column >
                                                        <m:Label text="{i18n>To_SelectedServiceEntrySheets_ServiceEntrySheet}" required="true"/>
                                                        <template>
                                                            <m:Input value="{detailDetailModel>ServiceEntrySheet}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedServiceEntrySheets_ServiceEntrySheet" maxLength="10"/>
                                                        </template>
                                                    </Column>
                                                    
                                                    <Column >
                                                        <m:Label text="{i18n>To_SelectedServiceEntrySheets_ServiceEntrySheetItem}" required="true"/>
                                                        <template>
                                                            <m:Input value="{detailDetailModel>ServiceEntrySheetItem}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTo_SelectedServiceEntrySheets_ServiceEntrySheetItem" maxLength="5"/>
                                                        </template>
                                                    </Column>
                                                </Table>

                                                <Table id="idInvLineItemTable" rows="{
                                                        path: 'detailDetailModel>/currentInvoice/PORecords',
                                                        sorter: {
                                                            path: 'Name'
                                                        }
                                                    }" class="sapUiSmallMargin"
                                                        rowSelectionChange="onSelectionPOChange"
                                                        selectionMode="None">
                                                    <extension>
                                                        <m:Toolbar>
                                                            <m:Title text="{parts: [{path: 'i18n>BodyLineItemsPurchaseOrder'}, {path: 'detailDetailModel>/currentInvoice/PORecords/length'}], 
                                                                formatter: '.formatter.getI18nTextWithCount'}" level="H2" />
                                                            <m:ToolbarSpacer />
                                                            <m:Button text="{i18n>AddButton}" press="onAddPORow" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            <m:Button id="deleteRowFromPOLineTable" text="{i18n>DeleteButton}" press="onDeleteSelectedPORows" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                        </m:Toolbar>
                                                    </extension>
                                                    <columns>
                                                        <!-- <Column width="8rem" >
                                                            <m:Label text="{i18n>DocLineNo}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>SupplierInvoiceItem}" type="Number" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column> -->
                                                        <!-- <Column width="8rem" visible="{detailDetailModel>/props/bMultiplePO}">
                                                            <m:Label text="{i18n>PurchaseOrder}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>PONumber}" showValueHelp="true" valueHelpRequest="onMultiplePOVH" change="onMultiPOInputChange" maxLength="10" visible="{detailDetailModel>/props/bMultiplePO}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            </template>
                                                        </Column> -->
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>PurchaseOrder}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>PurchaseOrder}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangePurchaseOrder" maxLength="10"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>PurchaseOrderItem}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>PurchaseOrderItem}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangePurchaseOrderItem" maxLength="5"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Plant}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Plant}"  maxLength="4" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangePlant"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>TaxCode}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>TaxCode}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTaxCode" maxLength="2"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" > 
                                                            <m:Label text="{i18n>SupplierInvoiceItemAmount}" required="true"/>
                                                            <template>
                                                                <m:Input value="{
                                                                    path: 'detailDetailModel>SupplierInvoiceItemAmount',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 14,
                                                                        scale: 3
                                                                    }
                                                                }" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeSupplierInvoiceItemAmount"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>QuantityInPurchaseOrderUnit}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>QuantityInPurchaseOrderUnit}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeQuantityInPurchaseOrderUnit" maxLength="3"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>OrderUnit}" required="true"/>
                                                            <template>
                                                                <m:Input value="{
                                                                    path: 'detailDetailModel>QuantityInPurchaseOrderUnit',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 13,
                                                                        scale: 3
                                                                    }
                                                                }" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeQuantityInPurchaseOrderUnit"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Text text="{i18n>SupplierInvoiceItemText}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>SupplierInvoiceItemText}" maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeSupplierInvoiceItemText"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>IsNotCashDiscountLiable}" required="true"/>
                                                            <template>
                                                                <m:CheckBox selected="{detailDetailModel>IsNotCashDiscountLiable}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" select=".onChangeIsNotCashDiscountLiable"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Text text="{i18n>ServiceEntrySheet}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ServiceEntrySheet}" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeServiceEntrySheet"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Text text="{i18n>ServiceEntrySheetItem}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ServiceEntrySheetItem}" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeServiceEntrySheetItem"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>IsFinallyInvoiced}" required="true"/>
                                                            <template>
                                                                <m:CheckBox selected="{detailDetailModel>IsFinallyInvoiced}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" select=".onChangeIsFinallyInvoiced"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>CostCenter}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>CostCenter}" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeCostCenter"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>ControllingArea}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ControllingArea}" maxLength="4" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeControllingArea"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>BusinessArea}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>BusinessArea}" maxLength="4" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeBusinessArea"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>ProfitCenter}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ProfitCenter}" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeProfitCenter"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>FunctionalArea}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>FunctionalArea}" maxLength="16" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeFunctionalArea"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>WBSElement}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>WBSElement}" maxLength="24" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeWBSElement"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>SalesOrder}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>SalesOrder}" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeSalesOrder"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>SalesOrderItem}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>SalesOrderItem}" maxLength="6" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeSalesOrderItem"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>InternalOrder}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>InternalOrder}" maxLength="12" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeInternalOrder"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>CommitmentItem}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>CommitmentItem}" maxLength="24" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeCommitmentItem"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>FundsCenter}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>FundsCenter}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeFundsCenter" maxLength="16"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Fund}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Fund}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeFund" maxLength="10"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>GrantID}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>GrantID}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeGrantID" maxLength="20"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>ProfitabilitySegment}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ProfitabilitySegment}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeProfitabilitySegment" maxLength="10"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>BudgetPeriod}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>BudgetPeriod}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeBudgetPeriod" maxLength="10"/>
                                                            </template>
                                                        </Column>
                                                     </columns>
                                                </Table>
                                            </m:IconTabFilter>
                                            <m:IconTabFilter text="{i18n>GLAccount}" count="{= ${detailDetailModel>/currentInvoice/GLAccountRecords/length}}">
                                                <Table id="idNPOInvGLAccountLineTable" rows="{
                                                        path: 'detailDetailModel>/currentInvoice/GLAccountRecords'
                                                    }" class="sapUiSmallMargin"
                                                        rowSelectionChange="onSelectionGLAccountChange"
                                                        selectionMode="None">
                                                    <extension>
                                                        <m:Toolbar>
                                                            <m:Title text="{parts: [{path: 'i18n>BodyLineItemsGLAccount'}, {path: 'detailDetailModel>/currentInvoice/GLAccountRecords/length'}], 
                                                                    formatter: '.formatter.getI18nTextWithCount'}" level="H2" />
                                                            <m:ToolbarSpacer />
                                                            <m:Button text="{i18n>AddButton}" press="onAddGLAccountRow" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            <m:Button id="deleteRowFromGLAccountLineTable" text="{i18n>DeleteButton}" press="onDeleteSelectedGLAccountRows" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                        </m:Toolbar>
                                                    </extension>
                                                    <columns>
                                                        <!-- <Column width="8rem">
                                                            <m:Label text="{i18n>DocLineNo}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>SupplierInvoiceItem}" type="Number" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column> -->
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>GLAccount}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>GLAccount}" showValueHelp="true" valueHelpRequest="onGLAcctVH2" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeGLAccount"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>DebitCreditCode}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>DebitCreditCode}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeDebitCreditCode" maxLength="1"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>Amount}" />
                                                            <template>
                                                                <m:Input value="{
                                                                    path: 'detailDetailModel>SupplierInvoiceItemAmount',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 14,
                                                                        scale: 3
                                                                    }}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeSupplierInvoiceItemAmount"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>TaxCode}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>TaxCode}" showValueHelp="true" valueHelpRequest="onTaxCodeVH" maxLength="2" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeTaxCode"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>Assignment}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>AssignmentReference}" showValueHelp="true" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeAssignment" maxLength="18"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="20rem">
                                                            <m:Label text="{i18n>Text}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>SupplierInvoiceItemText}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeSupplierInvoiceItemText" maxLength="50"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>CostCenter}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>CostCenter}" showValueHelp="true" valueHelpRequest="onCostCenterVH2" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeCostCenter"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>BusinessArea}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>BusinessArea}" maxLength="4" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeBusinessArea"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>PartnerBusinessArea}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>PartnerBusinessArea}" maxLength="4" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangePartnerBusinessArea"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>ProfitCenter}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ProfitCenter}" showValueHelp="true" valueHelpRequest="onProfitCenterVH" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeProfitCenter" maxLength="10"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>FunctionalArea}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>FunctionalArea}" maxLength="16" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeFunctionalArea"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>SalesOrder}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>SalesOrder}" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeSalesOrder"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>SalesOrderItem}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>SalesOrderItem}" maxLength="6" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeSalesOrderItem"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>CostCtrActivityType}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>CostCtrActivityType}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeCostCtrActivityType" maxLength="6"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>WBSElement}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>WBSElement}" showValueHelp="true" valueHelpRequest="onWBSElementVH" maxLength="24" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeWBSElement"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>PersonnelNumber}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>PersonnelNumber}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangePersonnelNumber" maxLength="8"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>IsNotCashDiscountLiable}" required="true"/>
                                                            <template>
                                                                <m:CheckBox selected="{detailDetailModel>IsNotCashDiscountLiable}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" select=".onChangeIsNotCashDiscountLiable"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>InternalOrder}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>InternalOrder}" maxLength="12" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeInternalOrder"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>CommitmentItem}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>CommitmentItem}" maxLength="24" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeCommitmentItem"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Fund}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Fund}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeFund" maxLength="10"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>GrantID}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>GrantID}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeGrantID" maxLength="20"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>QuantityUnit}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>QuantityUnit}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeQuantityUnit" maxLength="3"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Quantity}" required="true"/>
                                                            <template>
                                                                <m:Input value="{
                                                                    path: 'detailDetailModel>Quantity',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 13,
                                                                        scale: 3
                                                                    }
                                                                }" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeQuantity"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>FinancialTransactionType}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>FinancialTransactionType}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeFinancialTransactionType" maxLength="3"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>EarmarkedFundsDocument}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>EarmarkedFundsDocument}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeEarmarkedFundsDocument" maxLength="10"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>EarmarkedFundsDocumentItem}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>EarmarkedFundsDocumentItem}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeEarmarkedFundsDocumentItem" maxLength="3"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>BudgetPeriod}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>BudgetPeriod}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" change=".onChangeBudgetPeriod" maxLength="10"/>
                                                            </template>
                                                        </Column>

                                                    </columns>
                                                </Table>
                                            </m:IconTabFilter>
                                        </m:items>
                                    </m:IconTabBar>
                                    </l:BlockLayoutCell>
                                </l:BlockLayoutRow>
                            </l:BlockLayout>
                        </l:VerticalLayout>
                    </m:IconTabFilter>

                    <m:IconTabFilter text="{i18n>AdditionalInformation}">
                        <l:VerticalLayout class="sapUiNoContentPadding" width="100%">
                            <l:BlockLayout background="Light">
                                <l:BlockLayoutRow>
                                    <l:BlockLayoutCell class="sapUiContentPadding" visible="{props>/action/comment}">
                                        <m:VBox>
                                            <m:Title text="{i18n>Notes}"></m:Title>
                                            <m:TextArea id="idNotesTxtArea" rows="8" width="100%" />
                                            <m:Button text="{i18n>PostNoteButton}" press=".onAddNotes" width="100%" />
                                            <m:Button text="{i18n>ClearButton}" press=".onClearNotes" width="100%" />
                                        </m:VBox>

                                    </l:BlockLayoutCell>
                                    <l:BlockLayoutCell>
                                        <m:VBox>
                                            <m:ScrollContainer height="300px" width="100%" vertical="true" focusable="true">
                                                <c:Timeline enableDoubleSided="false" sortOldestFirst="false" growingThreshold="300" content="{detailDetailModel>/notes}" enableScroll="false" axisOrientation="Vertical" showHeaderBar="false" noDataText="No data">
                                                    <c:content>
                                                        <c:TimelineItem dateTime="{path:'detailDetailModel>CreatedAt', formatter:'.formatter.formatDateString'}" title="{detailDetailModel>Subject}" text="{detailDetailModel>Note}" userName="{detailDetailModel>CreatedBy}"></c:TimelineItem>
                                                    </c:content>
                                                </c:Timeline>
                                            </m:ScrollContainer>
                                        </m:VBox>
                                    </l:BlockLayoutCell>
                                </l:BlockLayoutRow>
                                <l:BlockLayoutRow>
                                    <l:BlockLayoutCell>
                                        <m:Table id="idFileList" items="{detailDetailModel>/currentInvoice/Allegati}" class="sapUiNoMargin">
                                            <m:headerToolbar>
                                                <m:Toolbar>
                                                    <m:Title text="{i18n>Files}" level="H2" />
                                                    <m:ToolbarSpacer />

                                                    <u:FileUploader width="600px" id="fileUploader" change="handleFileChange" style="Emphasized" name="file" sendXHR="true" fileType="txt,jpg,png,doc,docx,xls,xlsx,pdf,ppt,pptx,zip" placeholder="Choose a file for Upload..." visible="{detailDetailModel>/props/FileEditMode}" />

                                                    <m:Button icon="sap-icon://upload" press="handleUploadPress" tooltip="Upload file" visible="{detailDetailModel>/props/FileEditMode}" />
                                                    <m:ToggleButton icon="sap-icon://edit" press="onFileListEdit" visible="{props>/action/upload}" enabled="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/upload'], formatter: '.formatter.allowAddAttachment' }"/>

                                                </m:Toolbar>
                                            </m:headerToolbar>
                                            <m:columns>
                                                <m:Column>
                                                    <m:Text text="{i18n>File}" />
                                                </m:Column>
                                                <m:Column>
                                                    <m:Text text="{i18n>DocumentType}" />
                                                </m:Column>

                                            </m:columns>
                                            <m:items>
                                                <m:ColumnListItem vAlign="Middle">
                                                    <m:cells>
                                                        <m:ObjectIdentifier title="{detailDetailModel>nomeAttachment}" titleActive="true" titlePress="onDownloadAttachment" />
                                                        <m:Text text="{detailDetailModel>formatoAttachment}" />
                                                    </m:cells>
                                                </m:ColumnListItem>
                                            </m:items>
                                        </m:Table>
                                    </l:BlockLayoutCell>
                                </l:BlockLayoutRow>
                            </l:BlockLayout>
                        </l:VerticalLayout>
                    </m:IconTabFilter>
                </m:items>
            </m:IconTabBar>
        </f:content>
        <f:footer>
            <m:OverflowToolbar visible="{detailDetailModel>/props/gEditMode}">
                <m:ToolbarSpacer />
                <m:Button type="Emphasized" text="{i18n>SaveButton}" icon="sap-icon://save" visible="{props>/action/save}" press=".onSavePress" />
                <m:Button type="Accept" text="{i18n>SubmitButton}" icon="sap-icon://accept" visible="{props>/action/savesap}" press=".onSubmitPress" />
            </m:OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>