<mvc:View displayBlock="true" controllerName="vim_ui.controller.DetailDetail" height="100%" xmlns:mvc="sap.ui.core.mvc" 
	xmlns="sap.ui.table" xmlns:f="sap.f" xmlns:l="sap.ui.layout" xmlns:u="sap.ui.unified" xmlns:m="sap.m" xmlns:form="sap.ui.layout.form" xmlns:core="sap.ui.core" xmlns:c="sap.suite.ui.commons" class="sapUiSizeCompact">

    <f:DynamicPage id="DDPage" toggleHeaderOnTitleClick="true" showFooter="true" stickySubheaderProvider="iconTabBar" headerExpanded="false" preserveHeaderStateOnScroll="true" class="sapUiNoContentPadding">
        <f:title>
            <f:DynamicPageTitle>

                <f:heading>
                    <m:FlexBox wrap="Wrap" fitContainer="true" alignItems="Center">
                        <m:Title text="{i18n>DocumentExtraction}â€‹" wrapping="true" class="sapUiTinyMarginEnd" />
                    </m:FlexBox>
                </f:heading>
                <f:expandedContent>
                    <m:Label text="{i18n>DocumentExtraction}: {detailDetailModel>/lock/LOCKEDBY}" visible="{path: 'detailDetailModel>/lock/LOCKEDBY', formatter: '.formatter.formatLock'}" />
                </f:expandedContent>
                <f:snappedContent>
                    <m:Label text="{i18n>DocumentExtraction}: {detailDetailModel>/lock/LOCKEDBY}" visible="{path: 'detailDetailModel>/lock/LOCKEDBY', formatter: '.formatter.formatLock'}" />
                </f:snappedContent>

                <f:navigationActions>
                    <m:Button type="Emphasized" text="{i18n>EditDocumentButton}" icon="sap-icon://edit" press="handleGEdit" visible="{ parts:['detailDetailModel>/props/gEditMode', 'detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/admin'], formatter: '.formatter.detailDetailEdit' }" enabled="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/save'], formatter: '.formatter.allowActions' }" />
                    <m:Button type="Emphasized" text="{i18n>CancelEditButton}" icon="sap-icon://edit-outside" press="handleCancelGEdit" visible="{ parts:['detailDetailModel>/props/gEditMode', 'detailDetailModel>/detail/header/DOC_STATUS' , 'props>/action/admin'] , formatter: '.formatter.detailDetailEditCancel' }" />
                    <m:Button text="{i18n>AssignButton}" icon="sap-icon://activity-individual" press="onForwardPressHandler" 
                        visible="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/assign'], formatter: '.formatter.allowActions' }"
                        >
                        <m:layoutData>
                            <m:OverflowToolbarLayoutData priority="AlwaysOverflow" closeOverflowOnInteraction="false" />
                        </m:layoutData>
                    </m:Button>
                    <m:Button text="{i18n>ForwardButton}" icon="sap-icon://forward" press="onForwardPressHandler" 
                        visible="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/forward'], formatter: '.formatter.allowActions' }"
                        >
                        <m:layoutData>
                            <m:OverflowToolbarLayoutData priority="High" closeOverflowOnInteraction="false" />
                        </m:layoutData>
                    </m:Button>
                    <m:Button text="{i18n>RejectButton}" icon="sap-icon://employee-rejections" press="onRejectPress" 
                        type="Reject"
                        visible="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/reject'], formatter: '.formatter.allowActions' }"
                        >
                        <m:layoutData>
                            <m:OverflowToolbarLayoutData priority="High" closeOverflowOnInteraction="false" />
                        </m:layoutData>
                    </m:Button>
                    <m:Button icon="sap-icon://decline" press="onCancelPress" tooltip="Close" type="Transparent">
                        <m:layoutData>
                            <m:OverflowToolbarLayoutData priority="High" closeOverflowOnInteraction="false" />
                        </m:layoutData>
                    </m:Button>
                    <m:OverflowToolbarButton type="Transparent" icon="sap-icon://decline" press="onCancelPress" tooltip="Close column" visible="{= ${/actionButtonsInfo/endColumn/closeColumn} !== null }" />
                    <m:OverflowToolbarButton id="messagePopoverBtn" visible="true" icon="sap-icon://message-popup" type="Emphasized" text="{=${msg>/aMsg}.length}" press=".handleMessagePopoverPress" ariaHasPopup="Dialog" />

                </f:navigationActions>

            </f:DynamicPageTitle>
        </f:title>

        <f:header>
            <f:DynamicPageHeader pinnable="false">
                <l:Grid>
                    <m:ObjectAttribute title="Document Status" text="{path: 'detailDetailModel>/detail/header/DOC_STATUS', formatter: '.formatter.statusText'}" />
                    <m:ObjectAttribute title="Type/Category" text="{detailDetailModel>/detail/header/DOCCATEGORY}" />
                    <m:ObjectAttribute title="Assigned To" text="{detailDetailModel>/detail/header/ASSIGNEDTO}" />
                    <m:ObjectAttribute title="Changed By" text="{detailDetailModel>/detail/header/LASTCHANGEDBY}" />
                    <m:ObjectStatus title="Changed At" text="{path:'detailDetailModel>/detail/header/LASTCHANGEDON', formatter:'.formatter.formatDateString'}" />
                </l:Grid>
            </f:DynamicPageHeader>
        </f:header>

        <f:content>
            <m:IconTabBar id="iconTabBar" applyContentPadding="false" class="sapUiNoContentPadding" expandable="false">
                <m:items>

                    <m:IconTabFilter text="{i18n>MainDocument}">
                        <l:VerticalLayout class="sapUiNoContentPadding" width="100%" enabled="{detailDetailModel>/props/gEditMode}">
                            <l:BlockLayout id="BlockLayout" background="Light">
                                <l:BlockLayoutRow>
                                    <l:BlockLayoutCell>

                                        <form:SimpleForm id="invoiceHeaderSimpleForm" editable="true" layout="ResponsiveGridLayout" columnsM="2" columnsL="3" columnsXL="3">
                                            <form:content>

                                                <core:Title text="{i18n>Generalinformation}" />

                                                <m:Label text="{i18n>CompanyCode}" visible="{= !${detailDetailModel>/props/POMode}}" required="true" />

                                                <m:Label text="{i18n>InvoiceReceiptDate}" required="true" />
                                                <m:DatePicker id="idDocDate" value="{detailDetailModel>/header/documentDate}" placeholder="MM/DD/YYYY" valueFormat="yyyy-dd-MM" displayFormat="MM/dd/yyyy" />
                                                
                                                <m:Label text="{i18n>Invoicedate}" required="true" />
                                                <m:DatePicker id="idInvDate" value="{detailDetailModel>/header/documentDate}" placeholder="MM/DD/YYYY" valueFormat="yyyy-dd-MM" displayFormat="MM/dd/yyyy" />

                                                <m:Label text="{i18n>BaselineDate}" required="true" />
                                                <m:DatePicker id="idBaselineDate" value="{detailDetailModel>/documentDate/value}" placeholder="DD/MM/YYYY" valueFormat="dd-MM-yyyy" displayFormat="dd/MM/yyyy" />

                                                <m:Label text="{i18n>InvoicingPartyVendorCode}" required="true" />
                                                <m:Input id="idInvoicingPartyVendorCode" value="{detailDetailModel>/header/invoicingPartyVendorCode}"/>

                                                <m:Label text="{i18n>Assignment}" required="true" />
                                                <m:Input id="idAssignment" value="{detailDetailModel>/header/assignment}" maxLength="18"/>

                                                <m:Label text="{i18n>PostgingDate}" visible="false" />
                                                <m:DatePicker id="idDueDate" placeholder="YYYY-DD-MM" valueFormat="yyyy-dd-MM" displayFormat="yyyy-dd-MM" change="handleDateChange" visible="false" value="{detailDetailModel>/header/postingDate}"/>

                                                <m:Label text="{i18n>Reference}" required="true" />
                                                <m:Input id="idReference" value="{detailDetailModel>/header/reference}"/>
                                                
                                                <m:Label text="{i18n>Currency}" required="true" />
                                                <m:Input id="idCurrency" value="{detailDetailModel>/header/currency}" 
                                                    showValueHelp="true" valueHelpRequest=".onVHCurrency" 
                                                    maxLength="3"/>

                                                <m:Label text="{i18n>Text}" />
                                                <m:Input id="idFreeTxt" value="{detailDetailModel>/header/headerText}" maxLength="50"/>

                                                <core:Title text="{i18n>Amounts}" />
                                                <m:Label text="{i18n>GrossAmount}" required="true" />
                                                <m:Input id="idGrossAmt" 
                                                    value="{detailDetailModel>/header/grossAmount}" 
                                                    type="Number" description="{appmodel>/detailDetail/header/currencyCode/value}" 
                                                    placeholder="0.00"
                                                    liveChange="calcTotals"
                                                    />
                                                <m:Label text="{i18n>NetAmount}" />
                                                <m:Input id="idNetAmt" 
                                                    value="{detailDetailModel>/header/netAmount}" 
                                                    type="Number" description="{appmodel>/detailDetail/header/currencyCode/value}" placeholder="0.00" 
                                                    />

                                                <m:Label text="{i18n>PaymentTerms}" />
                                                <m:Input id="idPaymentTerms" showValueHelp="true" valueHelpRequest=".onPayTermsVH" value="{detailDetailModel>/header/paymentTerms}"/>
                                                
                                                <m:Label text="{i18n>PaymentMethod}" />
                                                <m:Input id="idPaymentMethod" value="{detailDetailModel>/header/paymentMethod}"/>
        

                                                <m:Label text="{i18n>InvoiceDocumentType}" />
                                                <m:Input id="idInvDocType" showValueHelp="true" valueHelpRequest=".onInvDocTypeVH" value="{detailDetailModel>/header/documentType}"/>

                                                <core:Title text="{i18n>Tax}" />
                                                <m:Label text="{i18n>TaxAmount}" />
                                                <m:Input id="idHTaxAmt" 
                                                    value="{
                                                    path: 'detailDetailModel>/header/taxAmount',
                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                    formatOptions: {
                                                    minFractionDigits: 1,
                                                    maxFractionDigits: 3
                                                    },
                                                    constraints: {
                                                    precision: 23,
                                                    scale: 4
                                                    }}"
                                                    liveChange="calcTotals"
                                                    type="Number" description="{appmodel>/detailDetail/header/currencyCode/value}" 
                                                    placeholder="0.00" enabled="true" />                                                  

                                                <m:Label text="{i18n>WithholdingTaxCode}" />
                                                <m:Input id="idWithholdingTaxCode" value="{detailDetailModel>/header/withholdingTaxCode}"/>    

                                               <m:Label text="{i18n>TaxCode}" />
                                                <m:Select id="idTaxCode" enabled="{ 
                                                          parts: [
                                                          'detailDetailModel>/props/POMode',
                                                          'appmodel>/detail/edited/CompCode'
                                                          ],
                                                          formatter: '.formatter.isTaxCode'
                                                        }" items="{detailDetailModel>/valuehelps/taxcode}"
                                                        change=".onHeaderTaxCodeSelect"
                                                        >
                                                    <core:Item id="idTaxCodeTmp" key="{detailDetailModel>Taxcode}" text="{detailDetailModel>Taxcode} - {detailDetailModel>Text}" />
                                                </m:Select>
                                            </form:content>
                                        </form:SimpleForm>
                                    </l:BlockLayoutCell>
                                </l:BlockLayoutRow>

                                <l:BlockLayoutRow>
                                    <l:BlockLayoutCell>
                                     <m:IconTabBar id="iconTabBarBodyInvoice" applyContentPadding="false" class="sapUiNoContentPadding" expandable="false">
                                        <m:items>
                                            <m:IconTabFilter text="{i18n>PurchaseOrder}" count="{= ${detailDetailModel>/DocxLines/length}}">
                                                <Table id="idInvLineItemTable" rows="{
                                                        path: 'detailDetailModel>/DocxLines',
                                                        sorter: {
                                                            path: 'Name'
                                                        }
                                                    }" class="sapUiNoMargin"
                                                        rowSelectionChange="onSelectionPOChange"
                                                        selectionMode="None">
                                                    <extension>
                                                        <m:Toolbar>
                                                            <m:Title text="{parts: [{path: 'i18n>BodyLineItemsPurchaseOrder'}, {path: 'detailDetailModel>/DocxLines/length'}], 
                                                                formatter: '.formatter.getI18nTextWithCount'}" level="H2" />
                                                            <m:ToolbarSpacer />
                                                            <m:Button text="{i18n>AddButton}" press="onAddPORow" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            <m:Button id="deleteRowFromPOLineTable" text="{i18n>DeleteButton}" press="onDeleteSelectedPORows" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                        </m:Toolbar>
                                                    </extension>
                                                    <columns>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>DocLineNo}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>InvoiceLineItem}" type="Number" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" visible="{detailDetailModel>/props/bMultiplePO}">
                                                            <m:Label text="{i18n>PurchaseOrder}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>PONumber}" showValueHelp="true" valueHelpRequest="onMultiplePOVH" change="onMultiPOInputChange" maxLength="10" visible="{detailDetailModel>/props/bMultiplePO}" enabled="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>POLineNo}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>PONumber} - {detailDetailModel>POLineItem}" showValueHelp="true" valueHelpRequest="onPurchaseOrderVH" maxLength="16" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" > 
                                                            <m:Label text="{i18n>Amount}" required="true"/>
                                                            <template>
                                                                <m:Input value="{
                                                                    path: 'detailDetailModel>Amount',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 23,
                                                                        scale: 4
                                                                    }
                                                                }" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Quantity}" required="true"/>
                                                            <template>
                                                                <m:Input value="{
                                                                    path: 'detailDetailModel>Quantity',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 13,
                                                                        scale: 3
                                                                    }
                                                                }" enabled="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>OrderUnit}" required="true"/>
                                                            <template>
                                                                <m:Input value="{
                                                                    path: 'detailDetailModel>OrderUnit',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 0,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 13,
                                                                        scale: 3
                                                                    }
                                                                }" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Text text="{i18n>Description}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Description}" maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>TaxCode}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>TaxCode}" showValueHelp="true" valueHelpRequest="onTaxCodeVH" maxLength="2" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>BusinessArea}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>BusinessArea}" maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>CostCenter}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>CostCenter}" maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>WBSElement}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>WBSElement}" maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Order}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Order}" maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Supplier}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Supplier}"  maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Material}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Material}"  maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>ValuationType}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ValuationType}"  maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>MaterialGroup}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>MaterialGroup}"  maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>Plant}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Plant}"  maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem" >
                                                            <m:Label text="{i18n>ValuationArea}" required="true"/>
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ValuationArea}"  maxLength="50" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>

                                                    </columns>
                                                </Table>
                                            </m:IconTabFilter>
                                            <m:IconTabFilter text="{i18n>GLAccount}" count="{= ${detailDetailModel>/NonPoDocxLines/length}}">
                                                <Table id="idNPOInvGLAccountLineTable" rows="{
                                                        path: 'detailDetailModel>/NonPoDocxLines'
                                                    }" class="sapUiNoMargin"
                                                        rowSelectionChange="onSelectionGLAccountChange"
                                                        selectionMode="None">
                                                    <extension>
                                                        <m:Toolbar>
                                                            <m:Title text="{parts: [{path: 'i18n>BodyLineItemsGLAccount'}, {path: 'detailDetailModel>/NonPoDocxLines/length'}], 
                                                                    formatter: '.formatter.getI18nTextWithCount'}" level="H2" />
                                                            <m:ToolbarSpacer />
                                                            <m:Button text="{i18n>AddButton}" press="onAddGLAccountRow" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                            <m:Button id="deleteRowFromGLAccountLineTable" text="{i18n>DeleteButton}" press="onDeleteSelectedGLAccountRows" visible="{detailDetailModel>/props/lineItemTable/editMode}" />
                                                        </m:Toolbar>
                                                    </extension>
                                                    <columns>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>DocLineNo}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>InvoiceLineItem}" type="Number" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>GLAccount}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>GLAcc}" showValueHelp="true" valueHelpRequest="onGLAcctVH2" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>Amount}" />
                                                            <template>
                                                                <m:Input value="{
                                                                    path: 'detailDetailModel>Amount',
                                                                    type: 'sap.ui.model.odata.type.Decimal',
                                                                    formatOptions: {
                                                                        minFractionDigits: 1,
                                                                        maxFractionDigits: 3,
                                                                        groupingEnabled: false
                                                                    },
                                                                    constraints: {
                                                                        precision: 23,
                                                                        scale: 4
                                                                    }}" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>TaxCode}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>TaxCode}" showValueHelp="true" valueHelpRequest="onTaxCodeVH" maxLength="2" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>Assignment}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Assignment}" showValueHelp="true" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="20rem">
                                                            <m:Label text="{i18n>Text}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>Text}" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>CostCenter}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>CostCen}" showValueHelp="true" valueHelpRequest="onCostCenterVH2" maxLength="10" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>ProfitCenter}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>ProfitCen}" showValueHelp="true" valueHelpRequest="onProfitCenterVH" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>
                                                        <Column width="8rem">
                                                            <m:Label text="{i18n>WBSElement}" />
                                                            <template>
                                                                <m:Input value="{detailDetailModel>WBSElem}" showValueHelp="true" valueHelpRequest="onWBSElementVH" maxLength="24" enabled="{detailDetailModel>/props/lineItemTable/editMode}"/>
                                                            </template>
                                                        </Column>

                                                    </columns>
                                                </Table>
                                            </m:IconTabFilter>
                                        </m:items>
                                    </m:IconTabBar>
                                    </l:BlockLayoutCell>
                                </l:BlockLayoutRow>
                            </l:BlockLayout>
                        </l:VerticalLayout>
                    </m:IconTabFilter>

                    <m:IconTabFilter text="{i18n>AdditionalInformation}">
                        <l:VerticalLayout class="sapUiNoContentPadding" width="100%">
                            <l:BlockLayout background="Light">
                                <l:BlockLayoutRow>
                                    <l:BlockLayoutCell class="sapUiContentPadding" visible="{props>/action/comment}">
                                        <m:VBox>
                                            <m:Title text="{i18n>Notes}"></m:Title>
                                            <m:TextArea id="idNotesTxtArea" rows="8" width="100%" />
                                            <m:Button text="{i18n>PostNoteButton}" press=".onAddNotes" width="100%" />
                                            <m:Button text="{i18n>ClearButton}" press=".onClearNotes" width="100%" />
                                        </m:VBox>

                                    </l:BlockLayoutCell>
                                    <l:BlockLayoutCell>
                                        <m:VBox>
                                            <m:ScrollContainer height="300px" width="100%" vertical="true" focusable="true">
                                                <c:Timeline enableDoubleSided="false" sortOldestFirst="false" growingThreshold="300" content="{detailDetailModel>/notes}" enableScroll="false" axisOrientation="Vertical" showHeaderBar="false" noDataText="No data">
                                                    <c:content>
                                                        <c:TimelineItem dateTime="{path:'detailDetailModel>CreatedAt', formatter:'.formatter.formatDateString'}" title="{detailDetailModel>Subject}" text="{detailDetailModel>Note}" userName="{detailDetailModel>CreatedBy}"></c:TimelineItem>
                                                    </c:content>
                                                </c:Timeline>
                                            </m:ScrollContainer>
                                        </m:VBox>
                                    </l:BlockLayoutCell>
                                </l:BlockLayoutRow>
                                <l:BlockLayoutRow>
                                    <l:BlockLayoutCell>
                                        <m:Table id="idFileList" items="{detailDetailModel>/Filelist}" class="sapUiNoMargin">
                                            <m:headerToolbar>
                                                <m:Toolbar>
                                                    <m:Title text="{i18n>Files}" level="H2" />
                                                    <m:ToolbarSpacer />

                                                    <u:FileUploader width="600px" id="fileUploader" change="handleFileChange" style="Emphasized" name="file" sendXHR="true" fileType="txt,jpg,png,doc,docx,xls,xlsx,pdf,ppt,pptx,zip" placeholder="Choose a file for Upload..." visible="{detailDetailModel>/props/FileEditMode}" />

                                                    <m:Button icon="sap-icon://upload" press="handleUploadPress" tooltip="Upload file" visible="{detailDetailModel>/props/FileEditMode}" />
                                                    <m:ToggleButton icon="sap-icon://edit" press="onFileListEdit" visible="{props>/action/upload}" enabled="{ parts:['detailDetailModel>/detail/header/DOC_STATUS', 'props>/action/upload'], formatter: '.formatter.allowAddAttachment' }"/>

                                                </m:Toolbar>
                                            </m:headerToolbar>
                                            <m:columns>
                                                <m:Column>
                                                    <m:Text text="{i18n>File}" />
                                                </m:Column>
                                                <m:Column>
                                                    <m:Text text="{i18n>DocumentType}" />
                                                </m:Column>

                                            </m:columns>
                                            <m:items>
                                                <m:ColumnListItem vAlign="Middle">
                                                    <m:cells>
                                                        <m:ObjectIdentifier title="{detailDetailModel>nomeAttachment}" titleActive="true" titlePress="onDownloadAttachment" />
                                                        <m:Text text="{detailDetailModel>formatoAttachment}" />
                                                    </m:cells>
                                                </m:ColumnListItem>
                                            </m:items>
                                        </m:Table>
                                    </l:BlockLayoutCell>
                                </l:BlockLayoutRow>
                            </l:BlockLayout>
                        </l:VerticalLayout>
                    </m:IconTabFilter>
                </m:items>
            </m:IconTabBar>
        </f:content>
        <f:footer>
            <m:OverflowToolbar visible="{detailDetailModel>/props/gEditMode}">
                <m:ToolbarSpacer />
                <m:Button type="Emphasized" text="{i18n>SaveButton}" icon="sap-icon://save" visible="{props>/action/save}" press=".onSavePress" />
                <m:Button type="Accept" text="{i18n>SubmitButton}" icon="sap-icon://accept" visible="{props>/action/savesap}" press=".onSubmitPress" />
            </m:OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>